<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flare Subtasks</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; color: #ffffff; background: #333; }
        .subtask { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Flare Subtasks</h1>
    <div class="subtask">
        <label>Ignition:</label>
        <select id="ignition">
            <option value="incomplete">Incomplete</option>
            <option value="completed">Completed</option>
            <option value="na">N/A</option>
        </select>
    </div>
    <div class="subtask">
        <label>Fuel Line:</label>
        <select id="fuelLine">
            <option value="incomplete">Incomplete</option>
            <option value="completed">Completed</option>
            <option value="na">N/A</option>
        </select>
    </div>
    <div class="subtask">
        <label>Burner:</label>
        <select id="burner">
            <option value="incomplete">Incomplete</option>
            <option value="completed">Completed</option>
            <option value="na">N/A</option>
        </select>
    </div>
    <button onclick="saveSubtasks()">Save</button>
    <button onclick="window.location.href='index.html'">Back to Main</button>

    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
            measurementId: "YOUR_MEASUREMENT_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        window.addEventListener('load', function() {
            db.collection('subtasks').doc('flare').get()
                .then(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        document.getElementById('ignition').value = data.ignition || 'incomplete';
                        document.getElementById('fuelLine').value = data.fuelLine || 'incomplete';
                        document.getElementById('burner').value = data.burner || 'incomplete';
                    }
                });
        });

        function saveSubtasks() {
            const subtasks = {
                ignition: document.getElementById('ignition').value,
                fuelLine: document.getElementById('fuelLine').value,
                burner: document.getElementById('burner').value
            };
            db.collection('subtasks').doc('flare').set(subtasks)
                .then(() => alert('Subtasks saved!'))
                .catch(error => alert('Error saving subtasks: ' + error.message));
        }
    </script>
</body>
</html>
