<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burner Management Subtasks</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; color: #333; }
        .subtask-list { list-style: none; padding: 0; }
        .subtask-list li { margin: 10px 0; }
        button { margin-right: 10px; }
    </style>
</head>
<body>
    <h1>Burner Management Subtasks</h1>
    <ul class="subtask-list" id="subtaskList">
        <li>Check Sensor: <select id="sensor">
            <option value="pending">Pending</option>
            <option value="completed">Completed</option>
            <option value="na">N/A</option>
        </select></li>
        <li>Test Control Unit: <select id="controlUnit">
            <option value="pending">Pending</option>
            <option value="completed">Completed</option>
            <option value="na">N/A</option>
        </select></li>
        <li>Verify Ignition: <select id="ignition">
            <option value="pending">Pending</option>
            <option value="completed">Completed</option>
            <option value="na">N/A</option>
        </select></li>
    </ul>
    <button onclick="saveSubtasks('burner_management')">Save Subtasks</button>
    <button onclick="window.location.href='index.html'">Back to Checklist</button>

    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCaH-pJVKsCnLMOYHamxNh_XMUfj41vGvU",
            authDomain: "padsitepilot.firebaseapp.com",
            projectId: "padsitepilot",
            storageBucket: "padsitepilot.firebasestorage.app",
            messagingSenderId: "380246060537",
            appId: "1:380246060537:web:b8b92fdbc32d1a74826128",
            measurementId: "G-3H5TH08X46"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        window.addEventListener('load', function() {
            loadSubtasks('burner_management');
        });

        function saveSubtasks(taskId) {
            const subtasks = {
                sensor: document.getElementById('sensor').value,
                controlUnit: document.getElementById('controlUnit').value,
                ignition: document.getElementById('ignition').value
            };
            db.collection('subtasks').doc(taskId).set(subtasks)
                .then(() => {
                    console.log('Subtasks saved for', taskId);
                    alert('Subtasks saved!');
                })
                .catch(error => console.error('Error saving subtasks:', error));
        }

        function loadSubtasks(taskId) {
            db.collection('subtasks').doc(taskId).get()
                .then(doc => {
                    if (doc.exists) {
                        const subtasks = doc.data();
                        document.getElementById('sensor').value = subtasks.sensor || 'pending';
                        document.getElementById('controlUnit').value = subtasks.controlUnit || 'pending';
                        document.getElementById('ignition').value = subtasks.ignition || 'pending';
                    }
                })
                .catch(error => console.error('Error loading subtasks:', error));
        }
    </script>
</body>
</html>
